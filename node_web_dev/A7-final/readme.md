# CSCI-E31 Assignment 7 Final

## Structure Requirements
#### Express
- [x] A startup file located at bin/www as shown in the course
- [x] Package.json contains all project dependencies
- [x] Package.json contains a start script for production (npm start)
- [x] Package.json contains a start script for development that uses nodemon and the debugger
- [x] .gitignore listing node_modules
- [x] Directories in the project to include at least /views (optional), /routes, /models
- [x] Be sure your project doesn't include any generated JS or template files that your project does not use.
- [x] A REST API for all four CRUD operations, plus any other APIs your app may need
- [x] You application may use Web/HTML routes as well, if you like.
- [x] You should serve your Angular application using a static route in Express.

#### Angular
- [x] project should use the structure generated by the Angular CLI as the starting point
- [x] should add at least one additional component to the app.
- [x] should have at least one nested component
- [x] should have at least on repeated template item (ngfor)
- [x] doesn't include any generated component .ts or .html files that arent necessary. (.spec.ts files are fine)

## Functionality Requirements
#### Express
- [x] Your application should not use GET requests to do Update or Delete operations
- [x] Database access should be provided by a service class that provides services to both the REST API and Web/HTML routes. In other words, don't have mongoose methods such as find() and save() repeated in multiple different router js files.
- [x] Your REST API should respond appropriately to preflights, and all responses should have the correct mimetype and CORS headers set.
- [x] Your application must use MongoDB (Atlas is recommended) to store data

#### Angular
- [x] project needs to display data from your [API]
- [x] All CRUD operations must be demonstrated

#### Overall Functionality Requirements
- [x] Your application should provide the ability to do all four CRUD operations that lets user(s) manage information stored in the database.
- [x] Your application should support being able to retrieve a resource(s)
- [x] Your application should support being able to create a resource(s)
- [x] Your application should support being able to update a resource(s)
- [x] Your application should support being able to delete a resource(s)
- [x] At least two types of CRUD operations must be supported in your Angular application.
- [x] Your application should do something.

# Grading this assignment

- all endpoints are supported in angular, there are no static/pug pages in this express app
- Angular supports all the front end while express only runs the API and serves the Angular UI artifacts
- endpoints for posts are /api/profiles/:profileId/posts (C, R) & /api/profiles/:profileId/posts/:postId (U, D)

### Walking through the app to verfiy the CRUD operations
1. Visit https://staging.replyas.com
2. Login with username: 'demo' password: 'password'
3. Notice a listing of 3 posts already stored in the database for this user
4. Click the blue '+' icon on the top left
5. Fill out the form. The 'Subreddit search' field will auto dropdown with a subreddit autosuggestion as you type, you can also choose a posting time by clicking 'Scheduling Strategy'
4. Once you've filled out the form and all the fields are green bordered (valid entries, red is invalid), click 'Add to Queue' and see the post get added and sorted into the correct time position in your queue
5. Click 'Edit' on any post, change some of the fields and/or the Post type, then click 'Save Changes' and notice the changes are saved
6. Click 'Delete' on any post then confirm by clicking 'Delete Post' on the alert dialog, notice the post is removed from your Queue

#### CRUD API
I tried to make the Node API pretty straight forward with some code refactorings i did. Its pretty well commented, the only thing that may look strange is that posts are subdocs of profiles. So they don't export a model they only export a schema. Posts do still have all of the correct CRUD operations though. For a post, the only read operation is for reading them all since reading them all returns the entire post(s) in an array, there wasn't much need for an API endpoint to return a single post since the UI is listing based anyway. There is also authentication guards and OAuth related stuff in the utilities section, this allows the API to secure profiles and posts by using some utilities methods as middleware, making sure requests are coming from authorized clients. Otherwise, everything is pretty similar to assignment 5 with session based authentication and all that.

Your may also notice some of my vars have capital first letters, i tried to do this where the var actually had mongoose methods attached to it, meaning the var was a mongoose model bascially. Im not sure if this was the right way to do it or not.

#### Angular
- The profiles/Post item has all of the CRUD operations and is built to spec with the final in mind, there are a few other items/objects like Profile and Account but these dont have every CRUD operation intentionally since, for example, a Profile can't be updated since it only contains (other than its subdocs) reddit auth token data.
- Similiar to assignment 6, you'll find a majority of the CRUD features and components related to Posts in app/profiles, since Posts are a subdoc/child of Profile
- The Create related code/scaffold is in app/profiles/queue, app/profiles/components/new-post-card, and app/shared/services/postService
- The Read related code/scaffold is in app/profiles/queue, app/profiles/components/queued-post-card, and app/shared/services/postService
- The Edit related code/scaffold is in app/profiles/queue, app/profiles/components/queued-post-card, and app/shared/services/postService
- The Delete related code/scaffold is in app/profiles/queue, app/profiles/components/queued-post-card, and app/shared/services/postService
- There are a few components/routes/pages in the app that deal with user account settings, i'm planning on building upon this project in my own repo after the course ends and those are a few things I was working on on the side. They shouldnt be a bother at all while grading since they're all in the /account folder and i've temporarily disabled the button/links which navigate to them from the top navbar

##### Frameworks/LIbraries Used
- Angular
- Node
- DotEnv (Node)
- Passport (Node/Express)
- Request (Node)
- ShipIt (Node, for deployment)
- ExpressJS 
- Bootstrap (and bootstraps 'Wingman' theme)
- ng-bootstrap (Angular)
- lodash (Angular)
- moment (Angular)
- and various others, but the above are the big ones
